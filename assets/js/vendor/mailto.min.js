!function(e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):"undefined"!=typeof window?window.mailto=e():"undefined"!=typeof global?global.mailto=e():"undefined"!=typeof self&&(self.mailto=e())}(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";var Mailto=require("./lib/mailto.js");module.exports=Mailto},{"./lib/mailto.js":2}],2:[function(require,module,exports){"use strict";function Mailto(form,options){this.form=null;this.preventDefault=true;this.formatter=Mailto.defaultFormatter;this.onSubmit=function(m){};this.initFormObject(form);this.initOptions(options);this.initFormHandler()}Mailto.prototype={initFormObject:function initFormObject(formOrSelector){if(typeof formOrSelector==="string"){this.form=document.querySelector(formOrSelector)}else{this.form=formOrSelector}if(!this.form||!("nodeName"in this.form)||this.form.nodeName!=="FORM"){throw new Error("Mailto first argument should be a valid CSS selector or a form instance.")}},initOptions:function initOptions(options){options=options||{};if(options.hasOwnProperty("preventDefault")){this.preventDefault=!!options.preventDefault}if(typeof options.onSubmit==="function"){this.onSubmit=options.onSubmit}if(typeof options.formatter==="function"){this.formatter=options.formatter}},initFormHandler:function initFormHandler(){var self=this;this.form.addEventListener("submit",function(event){if(self.preventDefault){event.preventDefault()}self.onSubmit(self)})},getBody:function getBody(){return this.formatter(this)},getMailtoUrl:function getMailtoUrl(to,fields){this.form.action.match(/mailto:([^\?&]+)/);to=to||RegExp.$1||"";fields=fields||{subject:this.form.getAttribute("data-subject")||"",body:this.getBody()};if(!to&&!fields.to){throw new Error("Could not find any person to send an email to.")}return"mailto:"+to+"?"+Object.keys(fields).reduce(function(a,b,i){return a+(i>0?"&":"")+encodeURIComponent(b)+"="+encodeURIComponent(fields[b]).replace(/%0A(?!%)/g,"%0D%0A")+(b==="body"?"%0D%0A":"")},"")},getFormData:function getFormData(){var form=this.form;var selector=["input","select","textarea"].join(",");return[].slice.call(form.querySelectorAll(selector)).filter(Mailto.formDataFilter).map(Mailto.formDataMapper(form))},getData:function getData(){var data={};this.getFormData().forEach(function(d){if(Array.isArray(data[d.name])){data[d.name].push(d.value)}else if(data[d.name]!==undefined){data[d.name]=[data[d.name],d.value]}else{data[d.name]=d.value}});return data}};Mailto.formDataFilter=function formDataFilter(el){if(!el.name){return false}if((el.type==="checkbox"||el.type==="radio")&&el.checked===false){return false}return true};Mailto.formDataMapper=function formDataMapper(form){return function(el){var value=el.value;var label=el.title;if("selectedIndex"in el){value=el.options[el.selectedIndex].getAttribute("value")}if(el.id){var source=form.querySelector('label[for="'+el.id+'"]');if(source){label=Mailto.textContent(source)}}if(!label&&el.parentNode.nodeName==="LABEL"){label=Mailto.textContent(el.parentNode)}return{name:el.name,label:label===null?"":label,value:value===null?"":value}}};Mailto.defaultFormatter=function(m){return m.getFormData().map(function(d){return(d.label||d.name).replace(/:$/,"")+":"+(d.value&&" "+d.value)}).join("\n")};Mailto.textContent="textContent"in document?function getTextContent(el){return el.textContent.trim()}:"innerText"in document?function getInnerText(el){return el.innerText.trim()}:function getContent(el){return elinnerHTML.replace(/\&lt;br\&gt;/gi,"\n").replace(/(&lt;([^&gt;]+)&gt;)/gi,"").replace(/(^\s+|\s+$)/g,"")};module.exports=Mailto},{}]},{},[1])(1)});